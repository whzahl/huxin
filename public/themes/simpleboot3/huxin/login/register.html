<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <!--H5页面窗口自动调整到设备宽度，并禁止用户缩放页面-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!--当网站添加到主屏幕快速启动方式，可隐藏地址栏，仅针对ios的safari ios7.0版本以后，safari上已看不到效果-->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!--将网站添加到主屏幕快速启动方式，仅针对ios的safari顶端状态条的样式-->
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!--忽略将页面中的数字识别为电话号码 忽略Android平台中对邮箱地址的识别-->
    <meta name="format-detection" content="telphone=no, email=no" />
	<title>注册_互信网</title>
    <link href="__TMPL__/huxin/static/common/bootstrap.min.css" rel="stylesheet">
    <link href="__TMPL__/huxin/static/common/reset.css" rel="stylesheet">
    <link href="__TMPL__/huxin/static/common/main.css" rel="stylesheet">
	<script src="__TMPL__/huxin/static/scripts/jquery.min.js"></script>
    <script type="text/javascript" src="__TMPL__/huxin/static/js/jquery.flexslider-min.js"></script>
	<script type="text/javascript" src="__TMPL__/huxin/static/js/complex.js"></script>
	<!-- 验证-->
	<link type="text/css" rel="stylesheet" href="__TMPL__/huxin/static/css/slide-unlock.css">

	<include file="huxin@commonSrc"/>
	<script type="text/javascript">
		$(function(){
	    $(".generate_code").click(function(){
	      var disabled = $(".generate_code").attr("disabled");  
	      if(disabled){  
	        return false;  
	      }  
	      if($("#mobile").val() == "" || isNaN($("#mobile").val()) || $("#mobile").val().length != 11 ){
			  swal({
				  title: "手机号格式错误",
				  text:"请重新输入!",
				  type:"error"
			  });
	        return false;
	      }
	      $.ajax({
	        type: "GET",
	        url: "{:url('/huxin/login/sendSMS')}",  
	        data: {mobile:$("#mobile").val()},  
	        dataType: "json",  
	        async:false,  
	        success:function(data){
	          settime();
	        },  
	        error:function(err){
	          console.log(err);  
	        }  
	      });  
	    });
	 //    $(":submit").click(function () {
		// 	var card = $("#idcard").val();
		// 	if (!isCardNo(card)){
  //               swal({
  //                   title: "身份证格式错误",
  //                   text:"请重新输入!",
  //                   type:"error"
  //               });
  //               return false;
		// 	}
		// 	$.ajax({
		// 		type:"POST",
		// 		url:$("form").attr("action"),
		// 		data:decodeURIComponent($("form").serialize()),
		// 		dataType:"json",
		// 		success:function (data,textStatus) {
  //                   swal(data.msg);
  //                   //额外绑定一个事件，当确定执行之后返回成功的页面的确定按钮，点击之后刷新当前页面或者跳转其他页面
		// 			if (data.url !== ""){
  //                       $('.confirm').click(function () {
  //                           window.location = data.url;
  //                       });
		// 			}
		// 			console.log(data);
  //               },
		// 		error:function (error) {
		// 			console.log(error);
  //               }
		// 	});
		// 	return false;
  //       });
		// function isCardNo(card) {
		// 	var pattern = /(^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2}[0-9Xx]$)/;
		// 	return pattern.test(card);
		// }
		var countdown=60;
	    var _generate_code = $(".generate_code");
	    function settime() {
	      if (countdown == 0) {  
	        _generate_code.attr("disabled",false);
	        _generate_code.val("获取验证码");
	        countdown = 60;  
	        return false;  
	      }
	      else {
	        $(".generate_code").attr("disabled", true);
	        _generate_code.val("重新发送(" + countdown + ")");
	        countdown--;  
	      }  
	      setTimeout(function() {  
	        settime();  
	      },1000);  
	    }  
	  })  
	</script>

</head>
<body>
<div class="wrap-page wrap-page-noheader bg-white">
<div class="login-tx"><img src="__TMPL__/huxin/static/images/icon-tx.png" class="tx"><p>未注册</p></div>
<div class="login-dlzc">
	<ul>
    	<li><a href="{:url('login/login')}">登录</a></li>
        <li class="dqzt"><a href="">注册</a></li>
    </ul>
</div>
<div class="login-dlz-step"><img src="__TMPL__/huxin/static/images/zc-pic01.jpg"></div>
<div class="list-container">
	<form method="post" action="{:url('login/register')}">
	<ul class="list">
	<li class="item item-input">
		<div class="item-main">
		<label class="field-container">
			<input type="text" name="phone" label="phone" icon="person" id="mobile" placeholder="手机号" class="field">
		</label>
		</div>
	</li>
    <li class="item item-input">
		<div class="item-main">
		<label class="field-container">
			<input type="password" name="password" label="contact" icon="info" placeholder="登录密码" class="field">
		</label>
		</div>
	</li>
	<li class="item item-input">
		<div class="item-main">
		<label class="field-container">
			<input type="password" name="passwordt" label="contact" icon="info" placeholder="确认登录密码" class="field">
		</label>
		</div>
	</li>
	 <li class="item item-input">
		<div class="item-main">
		<label class="field-container">
			<input type="text" name="cmsCode" label="yzcode" icon="person" placeholder="请输入验证码" class="field">
 			<input type="button" class="obtain generate_code" value="获取验证码">
		</label>
		</div>
	</li>
	<div id="slider">
        <div id="slider_bg"></div>
        <span id="label">>></span> <span id="labelTip">拖动滑块验证</span>
    </div>
 
    <li class="item item-noline"><button type="submit" class="btn btn-block btn-green">注册</button></li>
	</ul>
	</form>
</div>
</div>
<script type="text/javascript" src="__TMPL__/huxin/static/js/jquery.slideunlock.js"></script> 
<script>
$(function () {
    var slider = new SliderUnlock("#slider",{
			successLabelTip : "验证成功"	
		},function(){
			// alert("");
   //      	window.location.href="{:url('huxin/login/login')}"
    	});
    slider.init();
})
</script> 
<include file="huxin@footer"/>
</body>
</html>
